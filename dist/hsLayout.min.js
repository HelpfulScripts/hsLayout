/*! hsLayout - v1.2.0 - 2016-04-25
* https://github.com/HelpfulScripts/hsLayout
* Copyright (c) 2016 Helpful Scripts; Licensed  */
!function(a,b){"undefined"==typeof hs&&(hs=function c(){"use strict";function a(a,b){if("[object Array]"!==Object.prototype.toString.call(b)&&(b=[b]),"function"!=typeof b[b.length-1])throw"invalid function parameter in call to hs.register";c.registry[a]||(c.registry[a]=b)}function b(a){if(void 0===c.registry[a])throw"unknown hs function '"+a+"'";for(var d=c.registry[a],e=d[d.length-1],f=[],g=0;g<d.length-1;g++)f.push(b(d[g]));var h=e.apply(null,f);return h}c.registry={};var d=b;return d.register=a,d}()),"undefined"!=typeof angular&&angular.module("hs",[]),"undefined"!=typeof angular&&angular.module("hs").factory("HsConfigurable",function(){return hs("HsConfigurable")}),hs.register("HsConfigurable",["HsObject",function(a){"use strict";function b(a,c){for(var d in a)a[d]instanceof Array?(c[d]=[],b(a[d],c[d])):c[d]=a[d]}function c(a,b,c){c&&c(a,b)}return function(d,e,f){function g(a,d){var e=h.cfg.cfg;if(a){if("string"==typeof a){var f=a.indexOf(".json");return f>0&&f===a.length-5?(c(a,e,d),h):e[a]}return b(a,e),d&&d(),h}return e}var h=new a(d,e,f);return h.cfg=g,h.cfg.cfg={type:h.getType(),name:h.getName()},h}}]),"undefined"!=typeof angular&&angular.module("hs").factory("HsObject",function(){return hs("HsObject")}),hs.register("HsObject",function(){"use strict";return function(a,b,c){function d(a,b){if(a){if("string"==typeof a)return k[a]||[];var c=a.getType(),d=k[c];d||(d=k[c]=[]);var e=k.all.indexOf(a);return 0>e?(d.push(a),k.all.push(a)):b&&(k.all.splice(e,1),e=d.indexOf(a),e>=0&&d.splice(e,1)),a}return k.all}function e(){return i}function f(a){return i=a,j}function g(){return a||"undefined"}function h(a){throw console.log(a),"HsObject internal default function. Override '_outerFunction' to implement"}var i="undefined",j=function(){return j._outerFunction(arguments)};b&&"string"==typeof b&&(i=b),j._outerFunction=h,j.getType=g,j.getName=e,j.setName=f;var k={all:[]};return j.children=d,j.parent=c,c&&c.children(j),j}}),"undefined"!=typeof angular&&angular.module("hs").factory("hsDeprecated",function(){return hs("hsDeprecated")}),hs.register("hsDeprecated",function(){"use strict";return function(a,b){return void 0===a&&(a=!0),void 0===b&&(b=!0),function(c){if(c=c||"deprecated call",a&&console.log("Deprected: "+c),b){var d=new Error(c);console.log(d.stack)}}}}),angular.module("hsLayout",["ngTouch","hs"]),angular.module("hsLayout").controller("hsMoveableCtrl",[function(){"use strict";function a(a,b,c){return Math.round(i[c]*a/b)*b/i[c]}function b(a,b){return parseInt(a.css(b))}function c(a,b,c,d,e){return b>0&&a>0&&e>b&&e>a?"tl":b>0&&a>c-e&&e>b&&c>a?"tr":b>d-e&&a>0&&d>b&&e>a?"bl":b>d-e&&a>c-e&&d>b&&c>a?"br":b>0&&e>b?"move":""}function d(a){var c=a.widget.closest("hs-layout");if(""!==a.action){switch(a.dw=b(c,"width"),a.dh=b(c,"height"),a.helper=c.find("."+l),a.layout=c,a.left=b(a.widget,"left"),a.top=b(a.widget,"top"),a.width=b(a.widget,"width"),a.height=b(a.widget,"height"),a.action){case"move":a.a1="left",a.a2="top";break;case"br":a.a1="width",a.a2="height";break;case"bl":a.a1="left",a.a2="height";break;case"tr":a.a1="width",a.a2="top";break;case"tl":a.a1="left",a.a2="top"}var d=a.x,f=a.y;a.x-=b(a.widget,a.a1),a.y-=b(a.widget,a.a2),e(a,d-a.x,f-a.y)}}function e(c,d,e){var f,g,h=c.widget,i=c.helper,j=c.layout,k={left:b(j,"padding-left"),right:b(j,"padding-right"),top:b(j,"padding-top"),bottom:b(j,"padding-bottom")},l={left:b(h,"margin-left"),right:b(h,"margin-right"),top:b(h,"margin-top"),bottom:b(h,"margin-bottom")},m={left:b(h,"left"),top:b(h,"top"),width:b(h,"width"),height:b(h,"height")};"move"===c.action?(f=a(d,c.dw-k.left-k.right,0)+k.left,g=a(e,c.dh-k.top-k.bottom,1)+k.top,i.css("left",100*(d+k.left)/c.dw+"%"),i.css("top",100*(e+k.top)/c.dh+"%"),i.css("width",m.width),i.css("height",m.height),h.css("left",100*f/c.dw+"%"),h.css("top",100*g/c.dh+"%")):"br"===c.action?(f=a(d,c.dw-k.left-k.right,0)-l.left-l.right,g=a(e,c.dh-k.top-k.bottom,1)-l.top-l.bottom,i.css("left",m.left+k.left),i.css("top",m.top+k.top),i.css("width",100*d/c.dw+"%"),i.css("height",100*e/c.dh+"%"),h.css("width",100*f/c.dw+"%"),h.css("height",100*g/c.dh+"%")):"bl"===c.action?(f=a(d,c.dw-k.left-k.right,0)+k.left,g=a(e,c.dh-k.top-k.bottom,1)-l.top-l.bottom,i.css("left",100*(d+k.left)/c.dw+"%"),i.css("top",m.top+k.top),i.css("width",100*(c.width+c.left-d)/c.dw+"%"),i.css("height",100*e/c.dh+"%"),h.css("left",100*f/c.dw+"%"),h.css("width",100*(c.width+c.left-f)/c.dw+"%"),h.css("height",100*g/c.dh+"%")):"tl"===c.action?(f=a(d,c.dw-k.left-k.right,0)+k.left,g=a(e,c.dh-k.top-k.bottom,1)+k.top,i.css("left",100*(d+k.left)/c.dw+"%"),i.css("top",100*(e+k.top)/c.dh+"%"),i.css("width",100*(c.width+c.left-d)/c.dw+"%"),i.css("height",100*(c.height+c.top-e)/c.dh+"%"),h.css("left",100*f/c.dw+"%"),h.css("top",100*g/c.dh+"%"),h.css("width",100*(c.width+c.left-f)/c.dw+"%"),h.css("height",100*(c.height+c.top-g)/c.dh+"%")):"tr"===c.action&&(f=a(d,c.dw-k.left-k.right,0)-l.left-l.right,g=a(e,c.dh-k.top-k.bottom,1)+k.top,i.css("left",m.left+k.left),i.css("top",100*(e+k.top)/c.dh+"%"),i.css("width",100*d/c.dw+"%"),i.css("height",100*(c.height+c.top-e)/c.dh+"%"),h.css("top",100*g/c.dh+"%"),h.css("width",100*f/c.dw+"%"),h.css("height",100*(c.height+c.top-g)/c.dh+"%"))}function f(a){if(null==k){var e=$(a.target).closest(".hs-widget-container"),f=a.offsetX||a.clientX-$(a.target).offset().left,g=a.offsetY||a.clientY-$(a.target).offset().top,h=c(f,g,b(e,"width"),b(e,"height"),j);h&&(k={x:a.pageX,y:a.pageY,widget:e,action:h},d(k)),a.preventDefault()}}function g(a){null!=k&&e(k,a.pageX-k.x,a.pageY-k.y)}function h(){null!=k&&(k.helper&&(k.helper.css("top",-1e4),k.helper.css("left",-1e4)),k=null)}var i=[12,12],j=20,k=null,l="hs-widget-helper";this.moveable=function(a,b,c){var d=$(a).closest("hs-layout");if(0===d.length)console.log("hs-moveable called outside of a hs-layout");else{var e=$(a).closest(".hs-widget-container");if(0===e.length&&(e=d.find(".hs-widget-container")),0===e.length)console.log("hs-moveable did not find a widget container");else{0===d.find("."+l).length&&d.append("<div class="+l+"/>");var k=e.children();k.on("mousedown",f),d.on("mousemove",g),d.on("mouseup",h),b&&(j=b),c&&(i=c)}}}}]),angular.module("hsLayout").directive("hsLayout",["HsTileLayout","HsColumnsLayout","HsRowsLayout","HsRelativeLayout",function(a,b,c,d){"use strict";function e(a){var b=$(a.children()).children();return b}return{restrict:"E",replace:!1,transclude:!0,template:'<div class="hs-layout-container" ng-transclude></div>',controller:function(a,b){a.layItOut=function(){a.layout&&a.layout.layItOut(e(b))}},link:function(e,f,g){var h="tiles",i=[];void 0!==g.hsType?h=g.hsType:void 0!==g.hsTiles?h="tiles":void 0!==g.hsRelative?h="relative":void 0!==g.hsColumns?(h="columns",i=g.hsColumns||"[]"):void 0!==g.hsRows&&(h="rows",i=g.hsRows||"[]");var j,k=void 0!==g.hsFillLastCol;switch(h){case"columns":j=new b(i);break;case"rows":j=new c(i);break;case"tiles":j=new a(k);break;case"relative":j=new d;break;default:j=new a(k)}e.layout=j;var l=e;l.layItOut()}}}]),angular.module("hsLayout").directive("hsMaximizable",function(){"use strict";function a(a,b){var e=b[0],f=!0;return function(){var g,h=e.style.top,i=e.style.left,j=e.style.right,k=e.style.bottom,l=e.style.width,m=e.style.height,n=b.css("font-size");if(e.org)g=e.org,e.org=void 0,$(e).removeClass("hs-widget-in-front");else{var o=[window.innerWidth/parseInt(b.css("width")),window.innerHeight/parseInt(b.css("height"))],p=parseInt(n);g={left:"0%","font-size":+p*Math.max(o[0],o[1])+"px"},e.org={"font-size":n},""!==k&&"auto"!==k&&(e.org.bottom=k,g.bottom="0%"),""!==j&&"auto"!==j&&(e.org.right=j,g.right="0%"),""!==h&&"auto"!==h&&(e.org.top=h,g.top="0%"),""!==i&&"auto"!==i&&(e.org.left=i,g.left="0%"),""!==l&&"auto"!==l&&(e.org.width=l,g.width="100%"),""!==m&&"auto"!==m&&(e.org.height=m,g.height="100%"),$(e).addClass("hs-widget-in-front")}f?($(e).animate(g,d,c,function(){a.$broadcast("hs-resize-end",g)}),a.$broadcast("hs-resize-begin",g)):(a.$broadcast("hs-resize-begin",g),$(e).css(g),a.$broadcast("hs-resize-end",g))}}function b(a){var b=500;return function(c){var d=(new Date).getTime(),e=$(this).data("lastTouch")||d+1,f=d-e;return f>0&&b>f&&c.type===$(this).data("lastType")?(a(c),!1):($(this).data("lastTouch",d),$(this).data("lastType",c.type),!0)}}var c="swing",d=100;return{restrict:"A",replace:!1,controller:"hsMoveableCtrl",link:function(c,d){$(d).on("touchend mouseup",b(a(c,d)))}}}),angular.module("hsLayout").directive("hsMoveable",function(){"use strict";return{restrict:"A",replace:!1,controller:"hsMoveableCtrl",link:function(a,b,c,d){var e=parseInt(c.hsMoveable)||20,f=[12,12];void 0!==c.grid&&(f=JSON.parse(c.grid),f.length?(f[0]=parseFloat(f[0]),f[1]=parseFloat(f[1])):(f=parseFloat(f),f=[f,f])),d.moveable(b,e,f)}}}),angular.module("hsLayout").directive("hsWidget",function(){"use strict";function a(a,b){return a?JSON.parse(a):b}return{restrict:"EA",replace:!1,require:"?^hsLayout",transclude:!0,template:function(a,b){return b.hsInclude?'<div class="hs-widget-pane" ng-include="'+b.hsInclude+'"></div>':'<div class="hs-widget-pane" ng-transclude></div>'},link:function(b,c,d,e){if($(c).addClass("hs-widget-container"),c[0].cfgSize=a(d.hsSize,[]),c[0].cfgPos=a(d.hsPos,[]),!e)throw"no layout controller found in widget";b.layItOut()}}}),angular.module("hsLayout").factory("HsColumnsLayout",["HsLayout",function(a){"use strict";function b(a){return function(b){var f,g,h=b.length,i=[],j=h,k=100;for(f=0;h>f;f++)$(b[f]).css("top",0),$(b[f]).css("bottom",0),0===a.length?i.push({width:null}):1===a.length?i.push({width:a[0]}):0===f&&d?(i.push({width:a[0]}),j--,k-=a[0]):f===h-1&&e?(i.push({width:a[a.length-1]}),j--,k-=a[a.length-1]):f<a.length-1&&!isNaN(a[f])?(i.push({width:a[f]}),j--,k-=a[f]):i.push({width:null});var l,m=0;if("%"===c)for(l=k/j,f=0;h>f;f++){var n=i[f].width||l;$(b[f]).css("left",m+"%"),m+=n,f===h-1&&null==i[f].width?$(b[f]).css("right","0%"):$(b[f]).css("width",n+"%")}else{l=100/h;var o=!0;if(f=0,d)for(;h>f;){if(o)$(b[f]).css("left",m+"px"),null===i[f].width?(o=!1,$(b[f]).css("right",100-(f+1)*l+"%")):(m+=i[f].width,$(b[f]).css("width",i[f].width+"px"));else{if($(b[f]).css("right",100-(f+1)*l+"%"),null!==i[f].width)break;$(b[f]).css("left",f*l+"%")}f++}if(g=h-1,m=0,o=!0,e)for(;g>=Math.max(0,f-1);){if(o)if($(b[g]).css("right",m+"px"),null===i[g].width){if(o=!1,$(b[g]).css("width",""),d)break;$(b[g]).css("left",g*l+"%")}else m+=i[g].width,$(b[g]).css("left","auto"),$(b[g]).css("width",i[g].width+"px");else{if($(b[g]).css("right",100-(g+1)*l+"%"),null!==i[g].width)break;$(b[g]).css("left",g*l+"%")}g--}}}}var c="%",d=!1,e=!1;return function(f){var g=new a("HsColumnsLayout");f.indexOf("px")>=0&&(c="px"),f=f.replace(",,",',"",').replace(",,",',"",').replace("[,",'["",').replace(",]",',""]').replace("%","").replace("px",""),f=JSON.parse(f);var h=f.length-1;f[0]&&""!==f[0]&&(d=!0),h>0&&f[h]&&""!==f[h]&&(e=!0);for(var i=0;h>=i;i++)f[i]=parseFloat(f[i]);return g.layItOut=b(f),g}}]),angular.module("hsLayout").factory("HsLayout",["HsConfigurable",function(a){"use strict";function b(a){$(a).css("left",a.calcPos[0]),$(a).css("top",a.calcPos[1]),$(a).css("width",a.calcSize[0]),$(a).css("height",a.calcSize[1])}return function(c){var d=new a(c);return d.setWidgetPos=function(){throw"HsLayout is an abstract base class. Select a different layout."},d.setWidgetSize=function(){throw"HsLayout is an abstract base class. Select a different layout."},d.layItOut=function(a){for(var c=0;c<a.length;c++){var e=a[c];e.cfgSize&&e.cfgSize.length>0?e.calcSize=e.cfgSize:e.calcSize=d.setWidgetSize(c,a),e.cfgPos&&e.cfgPos.length>0?e.calcPos=e.cfgPos:e.calcPos=d.setWidgetPos(c,a),b(e)}},d.containerSize=function(a){return[parseInt(a.css("width")),parseInt(a.css("height"))]},d}}]),angular.module("hsLayout").factory("HsRelativeLayout",["HsLayout",function(a){"use strict";return function(){var b=new a("HsRelativeLayout");return b.layItOut=function(a){for(var b=0;b<a.length;b++){var c=a[b];$(c).css("position","relative"),$(c).css("top","auto"),$(c).css("bottom","auto"),$(c).css("left","auto"),$(c).css("right","auto"),$(c).css("width","100px"),$(c).css("height","50px")}},b}}]),angular.module("hsLayout").factory("HsRowsLayout",["HsLayout",function(a){"use strict";return function(b){function c(a){var c,d,h=a.length,i=[],j=h,k=100;for(c=0;h>c;c++)$(a[c]).css("left",0),$(a[c]).css("right",0),0===b.length?i.push({height:null}):1===b.length?i.push({height:b[0]}):0===c&&f?(i.push({height:b[0]}),j--,k-=b[0]):c===h-1&&g?(i.push({height:b[b.length-1]}),j--,k-=b[b.length-1]):c<b.length-1&&!isNaN(b[c])?(i.push({height:b[c]}),j--,k-=b[c]):i.push({height:null});var l,m=0;if("%"===e)for(l=k/j,c=0;h>c;c++){var n=i[c].height||l;$(a[c]).css("top",m+"%"),m+=n,c===h-1&&null==i[c].height?$(a[c]).css("bottom","0%"):$(a[c]).css("height",n+"%")}else{l=100/h;var o=!0;if(c=0,f)for(;h>c;){if(o)$(a[c]).css("top",m+"px"),null===i[c].height?(o=!1,$(a[c]).css("bottom",100-(c+1)*l+"%")):(m+=i[c].height,$(a[c]).css("height",i[c].height+"px"));else{if($(a[c]).css("bottom",100-(c+1)*l+"%"),null!==i[c].height)break;$(a[c]).css("top",c*l+"%")}c++}if(d=h-1,m=0,o=!0,g)for(;d>=Math.max(0,c-1);){if(o)if($(a[d]).css("bottom",m+"px"),null===i[d].height){if(o=!1,$(a[d]).css("height",""),f)break;$(a[d]).css("top",d*l+"%")}else m+=i[d].height,$(a[d]).css("top","auto"),$(a[d]).css("height",i[d].height+"px");else{if($(a[d]).css("bottom",100-(d+1)*l+"%"),null!==i[d].height)break;$(a[d]).css("top",d*l+"%")}d--}}}var d=new a("HsColumnsLayout");d.layItOut=c;var e="%",f=!1,g=!1;b.indexOf("px")>=0&&(e="px"),b=b.replace(",,",',"",').replace(",,",',"",').replace("[,",'["",').replace(",]",',""]').replace("%","").replace("px",""),b=JSON.parse(b);var h=b.length-1;b[0]&&""!==b[0]&&(f=!0),h>0&&b[h]&&""!==b[h]&&(g=!0);for(var i=0;h>=i;i++)b[i]=parseFloat(b[i]);return d}}]),angular.module("hsLayout").factory("HsTileLayout",["HsLayout",function(a){"use strict";return function(b){function c(a,b){var c=["%","%"],d=b[a],e=[0,0];if(a>0){var f=b[a-1],g=f.calcPos,h=f.calcSize,i=d.calcSize;c[0]=i[0].indexOf("px")>0?"px":"%",c[1]=i[1].indexOf("px")>0?"px":"%",e[0]=parseFloat(g[0])+parseFloat(h[0]),e[1]=parseFloat(g[1]),e[0]+parseFloat(i[0])>100&&(e[0]=0,e[1]+=parseFloat(h[1]))}return e[0]+=c[0],e[1]+=c[1],e}function d(a,c){var d=Math.sqrt(c.length),e=parseInt(Math.round(d)),f=parseInt(d);d>f&&f++;var g=[parseInt(100/f),parseInt(100/e)];if(b&&(a%f===f-1||a===c.length-1)){var h=Math.floor(a/f)*f;g[0]=100;for(var i=h;a>i;i++)g[0]-=parseInt(c[i].calcSize[0])}return g[0]+="%",g[1]+="%",g}var e=new a("HsTileLayout");return e.setWidgetPos=c,e.setWidgetSize=d,e}}]),b["true"]=a}({},function(){return this}());